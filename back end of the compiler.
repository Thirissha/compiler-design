#include <stdio.h>
#include <ctype.h>

char input[100];
int i = 0;

void E();
void T();
void F();
void generateCode(char *operation);

void E() {
    T();
    while (input[i] == '+' || input[i] == '-') {
        char op = input[i++];
        T();
        if (op == '+') {
            generateCode("ADD");
        } else if (op == '-') {
            generateCode("SUB");
        }
    }
}

void T() {
    F();
    while (input[i] == '*' || input[i] == '/') {
        char op = input[i++];
        F();
        if (op == '*') {
            generateCode("MUL");
        } else if (op == '/') {
            generateCode("DIV");
        }
    }
}

void F() {
    if (input[i] == '(') {
        i++;
        E();
        if (input[i] == ')') {
            i++;
        } else {
            printf("Syntax error: missing closing parenthesis\n");
            exit(1);
        }
    } else if (isalnum(input[i])) {
        generateCode("PUSH");
        printf(" %c\n", input[i++]);
    } else {
        printf("Syntax error: unexpected character '%c'\n", input[i]);
        exit(1);
    }
}

void generateCode(char *operation) {
    printf("%s\n", operation);
}

int main() {
    printf("Enter the input expression (e.g., a+b*c): ");
    scanf("%s", input);

    printf("\nGenerated Intermediate Code:\n");
    E();

    return 0;
}
